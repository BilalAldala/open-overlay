!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.OverlayEditor=t():e.OverlayEditor=t()}(self,(function(){return(()=>{var e={676:(e,t,n)=>{"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:()=>r})},3349:(e,t,n)=>{"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,{Z:()=>r})},2137:(e,t,n)=>{"use strict";function r(e,t,n,r,o,i,s){try{var a=e[i](s),l=a.value}catch(e){return void n(e)}a.done?t(l):Promise.resolve(l).then(r,o)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(o,i){var s=e.apply(t,n);function a(e){r(s,o,i,a,l,"next",e)}function l(e){r(s,o,i,a,l,"throw",e)}a(void 0)}))}}n.d(t,{Z:()=>o})},6610:(e,t,n)=>{"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,{Z:()=>r})},6156:(e,t,n)=>{"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{Z:()=>r})},4665:(e,t,n)=>{"use strict";function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,{Z:()=>r})},4699:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(2961);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}}(e,t)||(0,r.Z)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},484:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,{Z:()=>r})},2961:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(676);function o(e,t){if(e){if("string"==typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(e,t):void 0}}},7757:(e,t,n)=>{e.exports=n(5666)},5666:e=>{var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var o=t&&t.prototype instanceof p?t:p,i=Object.create(o.prototype),s=new Z(r||[]);return i._invoke=function(e,t,n){var r=f;return function(o,i){if(r===h)throw new Error("Generator is already running");if(r===y){if("throw"===o)throw i;return A()}for(n.method=o,n.arg=i;;){var s=n.delegate;if(s){var a=C(s,n);if(a){if(a===v)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=h;var l=u(e,t,n);if("normal"===l.type){if(r=n.done?y:d,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r=y,n.method="throw",n.arg=l.arg)}}}(e,n,s),i}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var f="suspendedStart",d="suspendedYield",h="executing",y="completed",v={};function p(){}function m(){}function b(){}var _={};_[i]=function(){return this};var g=Object.getPrototypeOf,w=g&&g(g(j([])));w&&w!==n&&r.call(w,i)&&(_=w);var x=b.prototype=p.prototype=Object.create(_);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function n(o,i,s,a){var l=u(e[o],e,i);if("throw"!==l.type){var c=l.arg,f=c.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,s,a)}),(function(e){n("throw",e,s,a)})):t.resolve(f).then((function(e){c.value=e,s(c)}),(function(e){return n("throw",e,s,a)}))}a(l.arg)}var o;this._invoke=function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}}function C(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var o=u(r,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var i=o.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function Z(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function j(e){if(e){var n=e[i];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,s=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return s.next=s}}return{next:A}}function A(){return{value:t,done:!0}}return m.prototype=x.constructor=b,b.constructor=m,m.displayName=l(b,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,a,"GeneratorFunction")),e.prototype=Object.create(x),e},e.awrap=function(e){return{__await:e}},E(k.prototype),k.prototype[s]=function(){return this},e.AsyncIterator=k,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var s=new k(c(t,n,r,o),i);return e.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},E(x),l(x,a,"Generator"),x[i]=function(){return this},x.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=j,Z.prototype={constructor:Z,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return a.type="throw",a.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var l=r.call(s,"catchLoc"),c=r.call(s,"finallyLoc");if(l&&c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(l){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:j(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};return(()=>{"use strict";n.r(r),n.d(r,{default:()=>Q});var e=n(4699),t=n(6610);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}var s=n(6156),a=n(2137),l=n(7757),c=n.n(l);function u(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw i}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t,n,r,o){var i;e.hasOwnProperty(t)&&(i=e[t],delete e[t]);var s="_"+t;Object.defineProperty(e,t,{get:function(){return r?r():e[s]},set:function(t){o?o(t):e[s]=t}});var a=null!=i?i:n;null!=a&&(e[t]=a)}function h(){return(h=(0,a.Z)(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,n){var r=document.createElement("link");r.rel="stylesheet",r.href=t,r.addEventListener("load",e),r.addEventListener("abort",n),r.addEventListener("error",n),document.head.appendChild(r)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e,t,n){var r=e.children;if(1==r.length&&1==t.length){var o=t[0],i=r[0];if(i.srcObject&&o.id==i.srcObject.id)return n(o,i),void(i.srcObject=o)}r.length>t.length&&v(r,t),t.forEach((function(t,o){var i=function(e,t){for(var n=0;n<e.length;n++)if(e[n].id==t)return n;return-1}(r,t.id),s=-1==i?null:r[i];if(!s||s.srcObject!=t){if(!(s=n(t,s)))return;s.srcObject=t}-1==i?(s.id=t.id,o<r.length?e.insertBefore(s,r[o]):e.appendChild(s)):i!=o&&e.insertBefore(s,r[o])})),r.length>t.length&&v(r,t)}function v(e,t){var n,r=t.map((function(e){return e.id})),o=[],i=u(e);try{for(i.s();!(n=i.n()).done;){var s=n.value;r.includes(s.id)||o.push(s)}}catch(e){i.e(e)}finally{i.f()}for(var a=0,l=o;a<l.length;a++)l[a].remove()}function p(e,t){var n,r=u(e.children);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(o.id==t)return o}}catch(e){r.e(e)}finally{r.f()}return null}var m=n(484),b=n(3349),_=n(4665);function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&(0,_.Z)(e,t)}function w(e,t){return!t||"object"!==(0,m.Z)(t)&&"function"!=typeof t?(0,b.Z)(e):t}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function k(e,t,n){return(k=E()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&(0,_.Z)(o,n.prototype),o}).apply(null,arguments)}function C(e){var t="function"==typeof Map?new Map:void 0;return(C=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return k(e,arguments,x(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),(0,_.Z)(r,e)})(e)}function O(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw i}}}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Z=/(import (.+ from )?["'])(\.\/)(.+)(["'])/g,j=function e(t,n,r,o,i){var s,a,l;if(n.startsWith("asset:")){var c=o[n];c&&(s=atob(c.src.substring(28)),console.log({asset:c,scriptText:s}),a=!1)}else s=r[n],a=!0;if(!s)throw"Could not find script or asset: "+n;if(a){var u=s.replace(Z,(function(n,s,a,l,c,u){return s+(i[c]||e(t,c,r,o,i))+u}));l=new Blob(["//# sourceURL=".concat(t,"/openoverlay/").concat(n,"\nconst context = window._openoverlayscriptingengine.contexts[").concat(t,"];\nconst { setTimeout, setInterval } = context;\n").concat(u)],{type:"text/javascript"})}else l=new Blob(["//# sourceURL=".concat(t,"/openoverlay/").concat(n,"\n").concat(s)],{type:"text/javascript"});var f=URL.createObjectURL(l);return i[n]=f,f},A=function(e){g(a,e);var n,r,o=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=x(n);if(r){var o=x(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return w(this,e)});function a(e,n,r,i,l){var c,u;if((0,t.Z)(this,a),c=o.call(this),(0,s.Z)((0,b.Z)(c),"_id",void 0),(0,s.Z)((0,b.Z)(c),"_overlayDOM",void 0),(0,s.Z)((0,b.Z)(c),"_scripts",void 0),(0,s.Z)((0,b.Z)(c),"_assets",void 0),(0,s.Z)((0,b.Z)(c),"_settings",void 0),(0,s.Z)((0,b.Z)(c),"_timeouts",[]),(0,s.Z)((0,b.Z)(c),"_intervals",[]),(0,s.Z)((0,b.Z)(c),"_scriptUrls",{}),c.setTimeout=c.setTimeout.bind((0,b.Z)(c)),c.setInterval=c.setInterval.bind((0,b.Z)(c)),c.updateSettings=c.updateSettings.bind((0,b.Z)(c)),!window._openoverlayscriptingengine)throw"Could not find window._openoverlayscriptingengine";c._id=window._openoverlayscriptingengine.lastContextId++,c._overlayDOM=e,c._scripts=n,c._assets=r,c._settings=i||{},c.renderLayer=l,window._openoverlayscriptingengine.contexts[c._id]=(0,b.Z)(c);try{u=j(c._id,"main.js",n,r,c._scriptUrls),import(u).catch((function(e){console.log("Error executing script:\n".concat(e.stack),{t:(0,m.Z)(e),lineNumber:e.lineNumber})}))}catch(e){console.log("Error compiling script:\n".concat(e))}return c}return i(a,[{key:"assets",get:function(){return this._assets}},{key:"settings",get:function(){return this._settings}},{key:"overlay",get:function(){return this._overlayDOM}},{key:"setTimeout",value:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){var n=setTimeout(e,t);this._timeouts.push(n)}))},{key:"setInterval",value:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){var n=setInterval(e,t);this._intervals.push(n)}))},{key:"updateSettings",value:function(e){this._settings=e,this.dispatchEvent(new CustomEvent("settings-changed"))}},{key:"destroy",value:function(){this.dispatchEvent(new CustomEvent("destroy"));var e,t=O(this._timeouts);try{for(t.s();!(e=t.n()).done;){var n=e.value;clearTimeout(n)}}catch(e){t.e(e)}finally{t.f()}var r,o=O(this._intervals);try{for(o.s();!(r=o.n()).done;){var i=r.value;clearInterval(i)}}catch(e){o.e(e)}finally{o.f()}for(var s=0,a=Object.values(this._scriptUrls);s<a.length;s++){var l=a[s];URL.revokeObjectURL(l)}delete window._openoverlayscriptingengine.contexts[this._id]}}]),a}(C(EventTarget));window._openoverlayscriptingengine||(window._openoverlayscriptingengine={lastContextId:1,contexts:{}});const P=A;function R(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return L(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?L(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw i}}}}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var I=function(e){g(a,e);var n,r,o=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=x(n);if(r){var o=x(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return w(this,e)});function a(){var e;(0,t.Z)(this,a),e=o.call(this),(0,s.Z)((0,b.Z)(e),"_overlayContainer",void 0),e.attachShadow({mode:"open"});var n=document.createElement("style");return n.innerHTML="        :host { width:100%;height:100%;display: block; }        :host([hidden]) { display: none; }        slot { width:100%;height:100%; }        slot > openoverlay-overlay { display: block; width: 100%; height: 100%; }        openoverlay-overlay > * { display: block; position: absolute; box-sizing: border-box; object-fit: cover; object-position: center center; overflow: hidden; }        ",e.shadowRoot.append(n),e._overlayContainer=document.createElement("div"),e._overlayContainer.className="overlay-container",e.shadowRoot.append(e._overlayContainer),e}return i(a,[{key:"rootElement",get:function(){return this._overlayContainer}},{key:"getOverlay",value:function(e){return p(this._overlayContainer,e)}},{key:"sendCommand",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;if(void 0!==n){var o=this.getOverlay(n);o?o.sendCommand(e,t,r):console.error("Could not send command to overlay ".concat(n," - overlay does not exist."))}else{var i,s=R(this._overlayContainer.children);try{for(s.s();!(i=s.n()).done;){var a=i.value,l=a[e];l&&"function"==typeof l?l(t):console.error("Could not find method '".concat(e,"' on overlay ").concat(n))}}catch(e){s.e(e)}finally{s.f()}}}}]),a}(C(HTMLElement));function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function M(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return F(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?F(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw i}}}}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}window.customElements&&window.customElements.define("openoverlay-renderer",I);var U=function(n){g(u,n);var r,o,l=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=x(r);if(o){var n=x(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return w(this,e)});function u(){var e;return(0,t.Z)(this,u),e=l.call(this),(0,s.Z)((0,b.Z)(e),"_assets",void 0),(0,s.Z)((0,b.Z)(e),"_assetLoadPromise",void 0),(0,s.Z)((0,b.Z)(e),"_loadedAssets",void 0),(0,s.Z)((0,b.Z)(e),"_settings",void 0),(0,s.Z)((0,b.Z)(e),"_preloadPromises",void 0),(0,s.Z)((0,b.Z)(e),"_slot",void 0),(0,s.Z)((0,b.Z)(e),"_scriptingContext",void 0),e._preloadPromises=[],e.onElementPreloading=e.onElementPreloading.bind((0,b.Z)(e)),e.loadAssetsAsync=e.loadAssetsAsync.bind((0,b.Z)(e)),e.assetsAvailable=e.assetsAvailable.bind((0,b.Z)(e)),e.addEventListener("preloading",e.onElementPreloading),e}return i(u,[{key:"connectedCallback",value:function(){var e=this;this.style.visibility="hidden",d(this,"settings",null,(function(){return e._settings}),(function(t){e._settings=t,e._scriptingContext&&e._scriptingContext.updateSettings(t)})),d(this,"assets",null,(function(){return e._assets}),(function(t){e._assets!=t&&(e._assets=t,e._assetLoadPromise=e.loadAssetsAsync(t))})),d(this,"scripts",null,(function(){return e._scripts}),(function(t){e._scripts!=t&&(e._scripts=t)})),requestAnimationFrame((0,a.Z)(c().mark((function t(){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e._preloadPromises){t.next=3;break}return t.next=3,Promise.all(e._preloadPromises);case 3:if(!e._assetLoadPromise){t.next=6;break}return t.next=6,e._assetLoadPromise;case 6:e.style.visibility="visible",e.dispatchEvent(new Event("load"));case 8:case"end":return t.stop()}}),t)}))))}},{key:"disconnectedCallback",value:function(){this.releaseAssets()}},{key:"onElementPreloading",value:function(e){e.detail.promise&&this._preloadPromises.push(e.detail.promise)}},{key:"findAsset",value:function(e){return this._loadedAssets?this._loadedAssets.find((function(t){return t.id==e})):null}},{key:"assetsAvailable",value:function(){return null!=this._loadedAssets}},{key:"releaseAssets",value:function(){if(this._loadedAssets){var e,t=M(this._loadedAssets);try{for(t.s();!(e=t.n()).done;){var n=e.value;URL.revokeObjectURL(n.objectUrl)}}catch(e){t.e(e)}finally{t.f()}}}},{key:"loadAssetsAsync",value:function(t){var n=this;this.releaseAssets(),this._loadedAssets=null,this._assetLoadPromise&&(this._assetLoadPromise.cancelled=!0);var r=Object.entries(t).map((function(t){var n=(0,e.Z)(t,2),r=n[0],o=D(D({},n[1]),{},{id:"#"+r});return fetch(o.src).then((function(e){return e.blob().then((function(e){return o.objectUrl=URL.createObjectURL(e),o}))}),(function(e){return console.error("Failed to load asset: "+e),o.error=e,o}))})),o=Promise.all(r).then((function(e){o.cancelled||(n._assetLoadPromise=null,n._loadedAssets=e,n.dispatchEvent(new CustomEvent("assets-changed")))}));return o}},{key:"getLayer",value:function(e){return p(this,e)}},{key:"sendCommand",value:function(e,t,n){if(void 0!==n){var r=p(this,n);if(r){var o=r[e];o&&"function"==typeof o?o(t):console.error("Could not find method '".concat(e,"' on overlay/layer ").concat(this.id,"/").concat(n))}else console.error("Could not send command to overlay/layer ".concat(this.id,"/").concat(n," - layer does not exist."))}else{var i,s=M(this.children);try{for(s.s();!(i=s.n()).done;){var a=i.value[e];a&&"function"==typeof a?a(t):console.error("Could not find method '".concat(e,"' on overlay/layer ").concat(this.id,"/").concat(n))}}catch(e){s.e(e)}finally{s.f()}}}}]),u}(C(HTMLElement));function B(e,t,n){return(B="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=x(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}window.customElements&&customElements.define("openoverlay-overlay",U);const N=function(e){g(a,e);var n,r,o=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=x(n);if(r){var o=x(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return w(this,e)});function a(){var e;return(0,t.Z)(this,a),e=o.call(this),(0,s.Z)((0,b.Z)(e),"_name",void 0),(0,s.Z)((0,b.Z)(e),"_overlay",void 0),(0,s.Z)((0,b.Z)(e),"_assetReferences",void 0),(0,s.Z)((0,b.Z)(e),"_initialized",void 0),(0,s.Z)((0,b.Z)(e),"_hostStyle",void 0),e._assetReferences={},e}return i(a,[{key:"connectedCallback",value:function(){var e=this;if(this._initialized=!0,this._overlay=this.closest("openoverlay-overlay"),!this._overlay)throw"Layer elements must be a descendant of an openoverlay-overlay element.";d(this,"hidden",!1,(function(){return e._hidden}),(function(t){e._hidden=t,e.style.visibility=t?"hidden":"visible",e.onHiddenChanged&&e.onHiddenChanged(t)})),d(this,"top",0,(function(){return e._top}),(function(t){e._top=t,e.style.top=t+"px"})),d(this,"left",0,(function(){return e._left}),(function(t){e._left=t,e.style.left=t+"px"})),d(this,"width",0,(function(){return e._width}),(function(t){e._width=t,e.style.width=t+"px"})),d(this,"height",0,(function(){return e._height}),(function(t){e._height=t,e.style.height=t+"px"})),d(this,"backgroundColor",null,(function(){return e._backgroundColor}),(function(t){e._backgroundColor=t,e.style.backgroundColor=t||null})),d(this,"border",null,(function(){return e._border}),(function(t){e._border=t,e.style.border=t||null})),d(this,"borderRadius",null,(function(){return e._borderRadius}),(function(t){e._borderRadius=t,e.style.borderRadius=t||null})),d(this,"opacity",null,(function(){return e._opacity}),(function(t){e._opacity=t,e.style.opacity=t||null})),d(this,"boxShadow",null,(function(){return e._boxShadow}),(function(t){e._boxShadow=t,e.style.boxShadow=t||null})),d(this,"filter",null,(function(){return e._filter}),(function(t){e._filter!=t&&(e._filter=t,e.style.filter=t||null)})),d(this,"transform",null,(function(){return e._transform}),(function(t){e._transform!=t&&(e._transform=t,e.style.transform=t||null)}))}},{key:"referenceAsset",value:function(e,t){this._assetReferences[e]=t}},{key:"unreferenceAsset",value:function(e){delete this._assetReferences[e]}},{key:"hasAssetReference",value:function(e){return null!=this._assetReferences[e]}},{key:"getAssetReferences",value:function(){return Object.values(this._assetReferences)}},{key:"disconnectedCallback",value:function(){}}]),a}(C(HTMLElement));var z=function(e){g(a,e);var n,r,o=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=x(n);if(r){var o=x(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return w(this,e)});function a(){var e;return(0,t.Z)(this,a),e=o.call(this),(0,s.Z)((0,b.Z)(e),"_iframe",void 0),e._iframe=document.createElement("iframe"),e._iframe.style="height: 100%; width: 100%; object-fit: inherit; object-position: inherit",e.onAssetsChanged=e.onAssetsChanged.bind((0,b.Z)(e)),e}return i(a,[{key:"connectedCallback",value:function(){var e=this;this._initialized||(B(x(a.prototype),"connectedCallback",this).call(this),this.append(this._iframe),d(this,"src",null,(function(){return e._src}),(function(t){if(e._src&&e._src.startsWith("#")&&e.unreferenceAsset("src"),null!=t&&t.startsWith("#")){if(e._overlay.assetsAvailable()){var n=e._overlay.findAsset(t);null!=n?(e.referenceAsset("src",t),e._iframe.src=n.objectUrl):(console.error("Could not find asset "+t),e._iframe.src=null)}}else e._iframe.src=t;if(t){var r=new Promise((function(t){e._iframe.addEventListener("load",(function n(){e._iframe.removeEventListener("load",n),t()}))}));e.dispatchEvent(new CustomEvent("preloading",{detail:{promise:r},bubbles:!0}))}e._src=t})),this._overlay.addEventListener("assets-changed",this.onAssetsChanged))}},{key:"disconnectedCallback",value:function(){B(x(a.prototype),"disconnectedCallback",this).call(this),this._overlay.removeEventListener("assets-changed",this.onAssetsChanged)}},{key:"onAssetsChanged",value:function(){this.src=this._src}}]),a}(N);window.customElements&&customElements.define("openoverlay-iframe",z);var H=function(e){g(a,e);var n,r,o=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=x(n);if(r){var o=x(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return w(this,e)});function a(){var e;return(0,t.Z)(this,a),e=o.call(this),(0,s.Z)((0,b.Z)(e),"_img",void 0),e._img=document.createElement("img"),e._img.style="height: 100%; width: 100%; object-fit: inherit; object-position: inherit",e.getNaturalDimensions=e.getNaturalDimensions.bind((0,b.Z)(e)),e.onAssetsChanged=e.onAssetsChanged.bind((0,b.Z)(e)),e}return i(a,[{key:"connectedCallback",value:function(){var e=this;this._initialized||(B(x(a.prototype),"connectedCallback",this).call(this),this.append(this._img),d(this,"src",null,(function(){return e._src}),(function(t){if(e._src&&e._src.startsWith("#")&&e.unreferenceAsset("src"),null!=t&&t.startsWith("#")){if(e._overlay.assetsAvailable()){var n=e._overlay.findAsset(t);null!=n?(e.referenceAsset("src",t),e._img.src=n.objectUrl):(console.error("Could not find asset "+t),e._img.src=null)}}else e._img.src=t;e._src=t})),d(this,"objectFit",null,(function(){return e._objectFit}),(function(t){e._objectFit=t,e._img.style.objectFit=t})),d(this,"objectPosition",null,(function(){return e._objectPosition}),(function(t){e._objectPosition=t,e._img.style.objectPosition=t})),this._overlay.addEventListener("assets-changed",this.onAssetsChanged))}},{key:"disconnectedCallback",value:function(){B(x(a.prototype),"disconnectedCallback",this).call(this),this._overlay.removeEventListener("assets-changed",this.onAssetsChanged)}},{key:"onAssetsChanged",value:function(){this.src=this._src}},{key:"getNaturalDimensions",value:function(){return this._img?{width:this._img.naturalWidth,height:this._img.naturalHeight}:null}}]),a}(N);window.customElements&&customElements.define("openoverlay-image",H);var V=function(e){g(s,e);var n,r,o=(n=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=x(n);if(r){var o=x(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return w(this,e)});function s(){return(0,t.Z)(this,s),o.call(this)}return i(s,[{key:"connectedCallback",value:function(){this._initialized||B(x(s.prototype),"connectedCallback",this).call(this)}}]),s}(N);window.customElements&&customElements.define("openoverlay-rectangle",V);var Y=function(e){g(a,e);var n,r,o=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=x(n);if(r){var o=x(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return w(this,e)});function a(){var e;return(0,t.Z)(this,a),e=o.call(this),(0,s.Z)((0,b.Z)(e),"_textDom",void 0),(0,s.Z)((0,b.Z)(e),"_textShadow",void 0),e}return i(a,[{key:"connectedCallback",value:function(){var e=this;this._initialized||(void 0===this.width&&(this.width=1),void 0===this.height&&(this.height=1),this.style.fontFamily="Arial",this.style.fontSize="60px",this.style.color="rgba(255,255,255,1)",this.style.display="flex",this.style.alignItems="flex-start",this.style.justifyContent="flex-start",this.style.whiteSpace="pre",this.style.overflow="visible",B(x(a.prototype),"connectedCallback",this).call(this),d(this,"text","",(function(){return e.innerText}),(function(t){e.innerText=t})),d(this,"font","",(function(){return e._font}),(function(t){e._font=t,e.style.fontFamily=t})),d(this,"fontSrc",null,(function(){return e._fontSrc}),(function(t){e._fontSrc=t,e.onFontSrcChanged()})),d(this,"fontSize",null,(function(){return e._fontSize}),(function(t){e._fontSize=t,e.style.fontSize=null==t?null:t+"px"})),d(this,"fontColor",null,(function(){return e._fontColor}),(function(t){e._fontColor=t,e.style.color=t})),d(this,"wrap",null,(function(){return e._wrap}),(function(t){e._wrap=t,e.style.whiteSpace=t?"pre-wrap":"pre"})),d(this,"letterSpacing",null,(function(){return e._letterSpacing}),(function(t){e._letterSpacing=t,e.style.letterSpacing=null==t?null:t+"px"})),d(this,"lineHeight",null,(function(){return e._lineHeight}),(function(t){e._lineHeight=t,e.style.lineHeight=null==t?null:t+"px"})),d(this,"textShadow",null,(function(){return e._textShadow}),(function(t){e._textShadow=t,e.style.textShadow=t})),d(this,"bold",null,(function(){return e._bold}),(function(t){e._bold=t,e.style.fontWeight=t?"bold":"normal"})),d(this,"italic",null,(function(){return e._italic}),(function(t){e._italic=t,e.style.fontStyle=t?"italic":"normal"})),d(this,"underline",null,(function(){return e._underline}),(function(t){e._underline=t,e.style.textDecoration=t?"underline":"none"})),d(this,"hAlign",null,(function(){return e._hAlign}),(function(t){switch(e._hAlign=t,t){case"left":e.style.textAlign="left",e.style.justifyContent="flex-start";break;case"center":e.style.textAlign="center",e.style.justifyContent="center";break;case"right":e.style.textAlign="right",e.style.justifyContent="flex-end"}})),d(this,"vAlign",null,(function(){return e._vAlign}),(function(t){switch(e._vAlign=t,t){case"top":e.style.alignItems="flex-start";break;case"center":e.style.alignItems="center";break;case"bottom":e.style.alignItems="flex-end"}})))}},{key:"disconnectedCallback",value:function(){B(x(a.prototype),"disconnectedCallback",this).call(this)}},{key:"attributeChangedCallback",value:function(e,t,n){B(x(a.prototype),"attributeChangedCallback",this).call(this,e,t,n)}},{key:"onFontSrcChanged",value:function(){var e=this;if(!this._fontSrc)return null;if(window._loadedFonts||(window._loadedFonts=[]),!window._loadedFonts.includes(this._fontSrc)){var t=function(e){return h.apply(this,arguments)}(this._fontSrc).then((function(t){window._loadedFonts.push(e._fontSrc)}));this.dispatchEvent(new CustomEvent("preloading",{detail:{promise:t},bubbles:!0}))}}}]),a}(N);function G(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=x(e);if(t){var o=x(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return w(this,n)}}window.customElements&&customElements.define("openoverlay-text",Y);var W=/.*(?:www\.youtube\.com\/(?:(?:watch\?v=)|(?:embed\/))|(?:youtu\.be\/))([a-z0-9]+)(?:\?(?:(?:t)|(?:start))=(\d+))?/i,$=function(e){g(r,e);var n=G(r);function r(){var e;return(0,t.Z)(this,r),e=n.call(this),(0,s.Z)((0,b.Z)(e),"_subelement",void 0),(0,s.Z)((0,b.Z)(e),"_isPlaying",void 0),e.ensureSubelement=e.ensureSubelement.bind((0,b.Z)(e)),e.getNaturalDimensions=e.getNaturalDimensions.bind((0,b.Z)(e)),e.onAssetsChanged=e.onAssetsChanged.bind((0,b.Z)(e)),e.play=e.play.bind((0,b.Z)(e)),e.pause=e.pause.bind((0,b.Z)(e)),e.stop=e.stop.bind((0,b.Z)(e)),e}return i(r,[{key:"connectedCallback",value:function(){var e=this;this._initialized||(B(x(r.prototype),"connectedCallback",this).call(this),d(this,"autoplay",!1,(function(){return e._autoplay}),(function(t){e._autoplay=t,e._subelement&&(e._subelement.autoplay=t)})),d(this,"src",null,(function(){return e._src}),(function(t){e._src&&e._src.startsWith("#")&&e.unreferenceAsset("src");var n,r=(n=t.match(W))?n[1]:null;if(e.ensureSubelement(null!=r),e._subelement.style.objectFit=e._objectFit||"cover",e._subelement.style.objectPosition=e._objectPosition||"center center",e._subelement.autoplay=e._autoplay,e._subelement.videoId=r,!r)if(t.startsWith("#")){if(e._overlay.assetsAvailable()){var o=e._overlay.findAsset(t);o?(e.referenceAsset("src",t),e._subelement.src=o?o.objectUrl:null):(console.error("Could not find asset "+t),e._subelement.src=null)}}else e._subelement.src=t;e._src=t})),d(this,"volume",null,(function(){return e._volume}),(function(t){e._volume=t,e._subelement.volume=t})),d(this,"objectFit",null,(function(){return e._objectFit}),(function(t){e._objectFit=t,e._subelement.style.objectFit=t})),d(this,"objectPosition",null,(function(){return e._objectPosition}),(function(t){e._objectPosition=t,e._subelement.style.bjectPosition=t})),d(this,"currentTime",0,(function(){return e._subelement.currentTime}),(function(t){e._subelement.currentTime=t})),d(this,"duration",0,(function(){return e._subelement.duration}),(function(e){})),this._overlay.addEventListener("assets-changed",this.onAssetsChanged))}},{key:"disconnectedCallback",value:function(){B(x(r.prototype),"disconnectedCallback",this).call(this),this._overlay.removeEventListener("assets-changed",this.onAssetsChanged)}},{key:"onAssetsChanged",value:function(){this.src=this._src}},{key:"onCommand",value:function(e){var t=e.detail,n=t.command,r=t.commandArg;if(t.settings,t.layerid==this.id)switch(n){case"setCurrentTime":this._subelement.currentTime=r;break;case"registerForStatusEvents":console.log("got status events yo",r),this.break;case"unregisterForStatusEvents":console.log("got UNREG status events yo",r)}}},{key:"ensureSubelement",value:function(e){!e||this._subelement instanceof q?e||this._subelement instanceof HTMLVideoElement||(this._subelement&&this.removeChild(this._subelement),this._subelement=document.createElement("video"),this._subelement.style="width:100%;height:100%;",this.appendChild(this._subelement)):(this._subelement&&this.removeChild(this._subelement),this._subelement=document.createElement("openoverlay-video-youtube"),this.appendChild(this._subelement))}},{key:"getNaturalDimensions",value:function(){return this._subelement instanceof q?{width:1280,height:720}:this._subelement instanceof HTMLVideoElement?{width:this._subelement.videoWidth,height:this._subelement.videoHeight}:null}},{key:"onHiddenChanged",value:function(e){this._isPlaying&&(e?this._subelement.pause():this._subelement.play())}},{key:"play",value:function(){this._subelement?this._subelement.play():console.error("Subelement not ready.")}},{key:"pause",value:function(){this._subelement?this._subelement.pause():console.error("Subelement not ready.")}},{key:"stop",value:function(){this._subelement?(this._subelement.pause(),this._subelement.currentTime=0):console.error("Subelement not ready.")}}]),r}(N),q=function(e){g(r,e);var n=G(r);function r(){var e;(0,t.Z)(this,r),e=n.call(this),(0,s.Z)((0,b.Z)(e),"_target",void 0),(0,s.Z)((0,b.Z)(e),"_apiReadyPromise",void 0),(0,s.Z)((0,b.Z)(e),"_playerReadyPromise",void 0),(0,s.Z)((0,b.Z)(e),"_lastPlayer",void 0),e.attachShadow({mode:"open"}),e._getVideoUrl=e._getVideoUrl.bind((0,b.Z)(e)),e._ensureYoutubeAPILoaded=e._ensureYoutubeAPILoaded.bind((0,b.Z)(e));var o=document.createElement("div");o.style="overflow:hidden;height:100%;width:100%;",e.shadowRoot.append(o);var i=document.createElement("div");i.style="position:absolute;top:0;left:0;width:100%;height:100%;",o.append(i);var a=document.createElement("div");return o.append(a),e._target=a,e._ensureYoutubeAPILoaded(),e}return i(r,[{key:"autoplay",get:function(){return this._autoplay},set:function(e){this._autoplay=e}},{key:"_getVideoUrl",value:function(){return"http://www.youtube.com/v/".concat(this._videoId,"?version=3")}},{key:"_ensureYoutubeAPILoaded",value:function(){this._apiReadyPromise=new Promise((function(e){if(window.YT)e();else{var t=document.querySelector("script[src='https://www.youtube.com/iframe_api']");if(t||((t=document.createElement("script")).src="https://www.youtube.com/iframe_api",document.head.append(t)),window.onYouTubeIframeAPIReady){var n=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=function(){n(),e()}}else window.onYouTubeIframeAPIReady=e}})),this.dispatchEvent(new CustomEvent("preloading",{detail:{promise:this._apiReadyPromise},bubbles:!0}))}},{key:"connectedCallback",value:function(){var e=this;this._initialized||(this._initialized=!0,d(this,"videoId",null,(function(){return e._videoId}),(function(t){e._videoId=t,e._playerReadyPromise&&e._playerReadyPromise.then((function(t){t.stopVideo(),e._videoId&&(e._autoplay?t.loadVideoById(e._videoId):t.cueVideoById(e._videoId))}))})),d(this,"autoplay",null,(function(){return e._autoplay}),(function(t){e._autoplay=t})),d(this,"currentTime",null,(function(){return e._lastPlayer?e._lastPlayer.getCurrentTime():0}),(function(t){e._lastPlayer&&e._lastPlayer.seekTo(t)})),d(this,"duration",null,(function(){return e._lastPlayer?e._lastPlayer.getDuration():0}),(function(e){})),d(this,"volume",null,(function(){return e._volume}),(function(t){e._volume=t,e._lastPlayer&&e._lastPlayer.setVolume(100*t)})),this._playerReadyPromise=new Promise((function(t){e._apiReadyPromise.then((function(){var n=new YT.Player(e._target,{width:"100%",height:"100%",playerVars:{controls:0,modestbranding:1},events:{onReady:function(){e._lastPlayer=n,e._volume&&n.setVolume(100*e._volume),t(n)}}})}))})),this.dispatchEvent(new CustomEvent("preloading",{detail:{promise:this._playerReadyPromise},bubbles:!0})))}},{key:"disconnectedCallback",value:function(){}},{key:"pause",value:function(){this._lastPlayer?this._lastPlayer.pauseVideo():console.error("Got pause() before player was loaded.")}},{key:"play",value:function(){this._lastPlayer?this._lastPlayer.playVideo():console.error("Got play() before player was loaded.")}}]),r}(C(HTMLElement));function J(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return K(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?K(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw i}}}}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}window.customElements&&(customElements.define("openoverlay-video",$),customElements.define("openoverlay-video-youtube",q));const Q=function(){function n(e){(0,t.Z)(this,n),(0,s.Z)(this,"_executeScriptsOnLoad",!0),(0,s.Z)(this,"_rendererDOM",void 0),e&&void 0!==e.executeScriptsOnLoad&&(this._executeScriptsOnLoad=e.executeScriptsOnLoad),this.createDomElement=this.createDomElement.bind(this),this.render=this.render.bind(this),this.renderOverlay=this.renderOverlay.bind(this),this.renderLayer=this.renderLayer.bind(this)}return i(n,[{key:"createDomElement",value:function(e){switch(e){case"image":return document.createElement("openoverlay-image");case"iframe":return document.createElement("openoverlay-iframe");case"rectangle":return document.createElement("openoverlay-rectangle");case"text":return document.createElement("openoverlay-text");case"video":return document.createElement("openoverlay-video");default:return null}}},{key:"render",value:function(e,t){var n=e.children;if(n.length>1)console.error("Cannot render to an element containing children.");else{if(0==n.length)this._rendererDOM=document.createElement("openoverlay-renderer"),e.appendChild(this._rendererDOM);else if(n[0]!=this._rendererDOM)return void console.error("Cannot render to an element containing children.");y(this._rendererDOM.rootElement,t,this.renderOverlay)}}},{key:"renderOverlay",value:function(e,t){return t||(t=document.createElement("openoverlay-overlay")),this._executeScriptsOnLoad&&t.addEventListener("load",this.executeScripts),t.srcObject==e||(t.renderLayer=this.renderLayer,t.id=e.id,t.assets=e.assets,t.scripts=e.scripts,t.settings=e.settings,y(t,e.layers,this.renderLayer)),t}},{key:"renderLayer",value:function(t,n){if(t.elementName){if(n||(n=this.createDomElement(t.elementName))){for(var r=0,o=Object.entries(t);r<o.length;r++){var i=(0,e.Z)(o[r],2),s=i[0],a=i[1];switch(s){case"id":case"elementName":case"label":break;default:n[s]!=a&&(n[s]=a)}}return n}console.error("Unable to create layer - unsupported element: "+t.elementName)}else console.error("Layer has no elementName specified.")}},{key:"executeScripts",value:function(){var e,t=J(this._rendererDOM.rootElement.children);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(n.scriptingContext)return void console.error("You must call resetScripts() before executing scripts again.");n.scriptingContext=new P(n,n.scripts,n.assets,n.settings,this.renderLayer)}}catch(e){t.e(e)}finally{t.f()}}},{key:"resetScripts",value:function(){var e,t=J(this._rendererDOM.rootElement.children);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(!n.scriptingContext)return void console.error("No current scripting context to reset.");n.scriptingContext.destroy(),n.scriptingContext=null}}catch(e){t.e(e)}finally{t.f()}}},{key:"sendCommand",value:function(e,t,n,r){this._rendererDOM?this._rendererDOM.sendCommand(e,t,n,r):console.error("Could not send command - renderer not yet initialized.")}},{key:"getOverlay",value:function(e){if(this._rendererDOM)return this._rendererDOM.getOverlay(e);console.error("Could not get overlay - renderer not yet initialized.")}}]),n}()})(),r})()}));